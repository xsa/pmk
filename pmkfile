# $Id$
# pmkfile for pmk

# set target file
SETTINGS {
	LANG="C"
	TARGET=("compat/compat.h.in","Makefile.pmk")
}

SWITCHES {
	sw_usermode = FALSE
}

IF(sw_usermode) {
	DEFINE {
		USERMODE = "-DPMK_USERMODE"
		BASE = "\$(HOME)"
		CONFDIR = "\$(BASE)/.pmk"
		BINDIR = "\$(BASE)/bin"
		SBINDIR = "\$(BASE)/bin"
		DATADIR = "\$(CONFDIR)"
		MANDIR = "\$(CONFDIR)"
	}
}

IF(!sw_usermode) {
	DEFINE {
		USERMODE = ""
		BASE = "$PREFIX"
		CONFDIR = "\$(SYSCONFDIR)/pmk"
		BINDIR = "\$(BASE)/bin"
		SBINDIR = "\$(BASE)/sbin"
		DATADIR = "\$(BASE)/share/\$(PREMAKE)"
		MANDIR = "\$(BASE)/man"
	}
}

# checking strlcpy in string.h
CHECK_INCLUDE(function_strlcpy) {
	REQUIRED = FALSE
	NAME = "string.h"
	FUNCTION = "strlcpy"
}

# checking strlcat in string.h
CHECK_INCLUDE(function_strlcat) {
	REQUIRED = FALSE
	NAME = "string.h"
	FUNCTION = "strlcat"
}

# check _Bool type
CHECK_TYPE(type__bool) {
	REQUIRED = FALSE
	NAME = "_Bool"
}

# check blkcnt_t type
CHECK_TYPE(type_blkcnt_t) {
	REQUIRED = FALSE
	NAME = "blkcnt_t"
	HEADER = "sys/types.h"
}

# checking stdbool.h
CHECK_INCLUDE(header_stdbool_h) {
	REQUIRED = FALSE
	NAME = "stdbool.h"
}

# checking libgen.h
CHECK_INCLUDE(header_libgen_h) {
	REQUIRED = FALSE
	NAME = "libgen.h"
}

# checking isblank in ctype.h
CHECK_INCLUDE(function_isblank) {
	REQUIRED = FALSE
	NAME = "ctype.h"
	FUNCTION = "isblank"
}

# checking mkstemps in unistd.h
CHECK_INCLUDE(function_mkstemps) {
	REQUIRED = FALSE
	NAME = "unistd.h"
	FUNCTION = "mkstemps"
}

